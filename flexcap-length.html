<!DOCTYPE html>
<html lang="en">

<style>
.slider-container {
  position: relative;
  width: 800px;
  margin: 0 auto;
}

.slider-track {
  display: flex;
  overflow-x: scroll;
  scroll-behavior: smooth;
  margin-bottom: 20px;
  /* Limit the number of visible items */
  width: calc(3 * 400px + 4 * 5px); /* Adapt based on item width & margin */
}

.carousel-item {
  width: 400px;
  height: 200px;
  margin: 0 5px;
  object-fit: cover;
  border: 2px solid #ddd;
  border-radius: 5px;
  cursor: pointer;
  transition: opacity 0.3s ease-in-out;
}

.carousel-item:hover {
  opacity: 0.8;
}

.carousel-item.selected {
  filter: saturate(1.5) brightness(1.2); /* Enhance color and brightness */
  border: 3px solid #fff; /* Whiter border for contrast */
}

.slider-container {
	 display: grid;
  place-items: center;
  position: absolute; /* changed from relative */
  top: 45%;
  left: 50%;
  transform: translate(-50%, -50%); /* centered positioning */
  width: 800px;
  margin: 0; /* no need for auto since positioned absolutely */
}

.slider-viewer {
  position: relative;
  width: calc(100% - 10px); /* Fill remaining space minus 100px margin */
  height: auto;
  margin: 0 auto;
  background-color: #fff;
  border-radius: 10px;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
  overflow: hidden;
}

.viewer-image {
  width: 100%;
  height: 100%;
  object-fit: contain;
  transition: transform 0.3s ease-in-out;
}

.navigation {
  display: flex;
  justify-content: center;
  margin-top: 10px;
}

.button {
  background-color: #eee;
  border: none;
  border-radius: 5px;
  padding: 10px 20px;
  cursor: pointer;
  transition: background-color 0.2s ease-in-out;
}

.button:hover {
  background-color: #ccc;
}

.button i {
  font-size: 20px;
}

.prev-button,
.next-button {
  background-color: #eee;
  border: none;
  border-radius: 5px;
  padding: 10px 20px;
  cursor: pointer;
  transition: background-color 0.2s ease-in-out;
}

.prev-button,
.next-button:hover {
  background-color: #ccc;
}

.prev-button i {
  font-size: 20px;
  margin-right: 5px; /* Optional spacing for arrows */
}

.next-button i {
  font-size: 20px;
  margin-left: 5px; /* Optional spacing for arrows */
}
</style>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FlexCap Length-Conditioned Results</title>
  <script defer src="./static/js/fontawesome.all.min.js"></script>
  <link rel="stylesheet" href="./static/css/bulma.min.css">
  <link rel="stylesheet" href="./static/css/index.css">
</head>
<body>
	<section class="hero teaser">
  <div class="container is-max-desktop">
    <div class="hero-body">
      <!-- <video id="teaser" autoplay muted loop playsinline height="100%">
        <source src=""
                type="video/mp4">
      </video> -->
      <h2 class="title has-text-centered">
        <span>FlexCap</span> can describe a region in an image in different lengths.
      </h2>
      <br>
      <h2 class="has-text-centered title is-4"> Select an image below. </h2>
    </div>
  </div>
</section>
  <div class="slider-container">
  	
    <div class="slider-track">
      <img class="carousel-item" src="./length_images/01.png" alt="Image 1">
      <img class="carousel-item" src="./length_images/02.png" alt="Image 2">
      <img class="carousel-item" src="./length_images/03.png" alt="Image 3">
      <img class="carousel-item" src="./length_images/04.png" alt="Image 1">
      <img class="carousel-item" src="./length_images/05.png" alt="Image 2">
      <img class="carousel-item" src="./length_images/06.png" alt="Image 3">
      <img class="carousel-item" src="./length_images/07.png" alt="Image 1">
      <img class="carousel-item" src="./length_images/08.png" alt="Image 2">
      <img class="carousel-item" src="./length_images/09.png" alt="Image 3">
      <img class="carousel-item" src="./length_images/10.png" alt="Image 1">

      <img class="carousel-item" src="./length_images/11.png" alt="Image 1">
      <img class="carousel-item" src="./length_images/12.png" alt="Image 2">
      <img class="carousel-item" src="./length_images/13.png" alt="Image 3">
      <img class="carousel-item" src="./length_images/14.png" alt="Image 1">
      <img class="carousel-item" src="./length_images/15.png" alt="Image 2">
      <img class="carousel-item" src="./length_images/16.png" alt="Image 3">
      <img class="carousel-item" src="./length_images/17.png" alt="Image 1">
      <img class="carousel-item" src="./length_images/18.png" alt="Image 2">
      <img class="carousel-item" src="./length_images/19.png" alt="Image 3">
      <img class="carousel-item" src="./length_images/20.png" alt="Image 1">

      <img class="carousel-item" src="./length_images/21.png" alt="Image 1">
      <img class="carousel-item" src="./length_images/22.png" alt="Image 2">
      <img class="carousel-item" src="./length_images/23.png" alt="Image 3">
      <img class="carousel-item" src="./length_images/24.png" alt="Image 1">
      <img class="carousel-item" src="./length_images/25.png" alt="Image 2">
      <img class="carousel-item" src="./length_images/26.png" alt="Image 3">
      <img class="carousel-item" src="./length_images/27.png" alt="Image 1">
      <img class="carousel-item" src="./length_images/28.png" alt="Image 2">
      <img class="carousel-item" src="./length_images/29.png" alt="Image 3">
      <img class="carousel-item" src="./length_images/30.png" alt="Image 1">

      <img class="carousel-item" src="./length_images/31.png" alt="Image 1">
      <img class="carousel-item" src="./length_images/32.png" alt="Image 2">
      <img class="carousel-item" src="./length_images/33.png" alt="Image 3">
      <img class="carousel-item" src="./length_images/34.png" alt="Image 1">
      <img class="carousel-item" src="./length_images/35.png" alt="Image 2">
      
      </div>
      <div class="navigation">
    <button class="prev-button">Prev</button>
    <button class="next-button">Next</button>
  </div>
    <div class="slider-viewer">
      <img class="viewer-image" src="./length_images/01.png" alt="Current Image">
    </div>

  <script>
const track = document.querySelector('.slider-track');
const viewerImage = document.querySelector('.viewer-image');
const prevButton = document.querySelector('.prev-button');
const nextButton = document.querySelector('.next-button');
const carouselItems = document.querySelectorAll('.carousel-item');

// Added a variable to store the previously selected item
let previouslySelected = null;
let currentImageIndex = 0;

// Updated click handler to update viewer image and highlight selected item
carouselItems.forEach((item, index) => {
  item.addEventListener('click', () => {
    if (previouslySelected) {
      previouslySelected.classList.remove('selected');
    }
    item.classList.add('selected'); // Add "selected" class for styling
    currentImageIndex = index;
    updateViewerImage();
    previouslySelected = item; // Update previously selected item
  });
});

// Update navigation buttons functionality
prevButton.addEventListener('click', () => {
  currentImageIndex--;
  if (currentImageIndex < 0) {
    currentImageIndex = carouselItems.length - 1;
  }
  updateViewerImage();
});

nextButton.addEventListener('click', () => {
   currentImageIndex++;
  if (currentImageIndex == carouselItems.length) {
    currentImageIndex = 0;
  }
  updateViewerImage();
});

function updateViewerImage() {
  const currentImage = track.children[currentImageIndex];
  viewerImage.src = currentImage.src;
  viewerImage.alt = currentImage.alt;
}

const maxIndex = carouselItems.length - 3;

prevButton.addEventListener('click', () => {
  currentImageIndex--;
  if (currentImageIndex < 0) {
    currentImageIndex = maxIndex;
  }
  updateViewerImage();
});

nextButton.addEventListener('click', () => {
  currentImageIndex++;
  if (currentImageIndex > maxIndex) {
    currentImageIndex = 0;
  }
  updateViewerImage();
});
function updateCarouselPosition() {
  // Calculate scroll position based on currentImageIndex
  const scrollPosition = currentImageIndex * (400 + 5); // Adapt if item width/margin change
  sliderTrack.scrollLeft = scrollPosition;
}

// Update track position on image change
updateViewerImage(); // Call initially
carouselItems.forEach((item, index) => {
  item.addEventListener('click', () => {
    currentImageIndex = index;
    updateViewerImage();
    updateCarouselPosition(); // Add this line
  });
});
</script>
</body>
</html>